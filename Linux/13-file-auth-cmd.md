# 文件权限

Linux系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。 为了保护系统的安全性，Linux系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。在Linux中我们可以使用`ll`或者`ls -l`命令来显示一个文件的属性以及文件所属 的用户和组。

![image-20230212083237896](https://liujie2288-blog.oss-cn-chengdu.aliyuncs.com/image-20230212083237896.png)

## 文件属性

如上图，从左到右的10个字符表示文件属性。

<img src="https://liujie2288-blog.oss-cn-chengdu.aliyuncs.com/image-20230212000327625.png" alt="image-20230212000327625" style="zoom:50%;" />

1. 第0位，表示文件的类型，可以是目录（字母d表示），文件（ - 表示），链接文件（字母l表示）等。
2. 第1～3位，表示该文件**所属用户（User）**拥有的权限。
3. 第4～6位，表示该文件**所属用户组（Group）**拥有的权限。
4. 第7～9位，表示该文件**其它用户**拥有的权限。

权限使用**`rwx`**表示，`rwx`对于文件和目录有不同的解释：

对于文件来说：

 `r`：可读权限，表示可以读取/查看（cat）

`w`：可写权限，表示可以修改文件（vim）（但是不代表可以删除，删除一个文件需要具有该文件所在目录的可写权限

`x`：可执行权限，表示可以被系统执行。

对于目录来说：

`r`：可读权限，表示可以读取/查看目录中的内容（ls）

`w`：可写权限，表示可以在目录内创建，删除，重命名操作

`x`：可执行权限，表示可一进入该目录（cd）

## chmod 改变权限

### 方式1：通过chmod + 权限字符修改

文件权限1～3位所代表的属主权限用字母`u`表示，4～6代表的属主权限用字母`g`表示，7～9位的其它用户权限用字母`o`表示。除此之外，还有一个字符`a`表示所有人（u，g，o的总和）

<img src="https://liujie2288-blog.oss-cn-chengdu.aliyuncs.com/image-20230212083616641.png" alt="image-20230212083616641" style="zoom:50%;" />

具体操作：

```bash
# 语法： chmod [选项]  [{ugoa}{+-=}{rwx}] 文件/目录
# 可选项
# -R 目录递归修改

# 案例1: 修改文件test.js的所属用户，使文件属主具有可执行权限
chmod u+x test.js
# 案例2: 修改文件test.js的所属组，使所属用户组中的用户具有可执行权限
chmod g+x test.js
```

### 方式2：通过chmod+数字修改

用一个3位数字来表示权限，其中数字每一位分别表示u，g，o的权限，数字的值表示具体拥有r=4，w=2，x=1哪些权限的总和。例如，7 = 4 + 2 + 1 表示拥有rwx权限，3 = 0 + 2 +1 表示拥有wx权限。

> 小帖士：
>
> r，w，x的值可以看成是由一个三位的二进制数表示。4（100），2（010），1（001），分别用0，1来表示所在位置权限的开关。

具体操作：

```bash
# 语法： chmod [选项] 数字  文件/目录
# 可选项
# -R 目录递归修改

# 案例1：修改文件test.js，让它可以被所有用户可读，可写，可执行
chmod 777 test.js
# 案例2: 递归修改test目录下的所有文件，让属主具有所有权限，其它用户只有可读和可以执行权限
chmod -R 755 test/
```

## chown 改变所有者

```bash
# 语法 chown [选项] 最终用户名  文件/目录
# 可选项
# -R 递归修改文件以及目录下的文件

# 案例1: 修改test.js文件的所属用户为jay
chown jay test.js
# 案例2： 修改test.目录下所有文件及目录的所属用户为jay，所属用户组为tony
chown -R jay:tony test/
```

## chgrp 改变所属组

```bash
# 语法 chgrp 最终用户组名  文件/目录

# 案例1：修改文件test.js的所属用户组为jay
chgrp root  test.js
```



